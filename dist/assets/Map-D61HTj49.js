import{_ as ot,u as ce,d as st,g as Yt,h as Xt,i as ft,o as nn,c as tn,e as q,a as ln,j as U,H as se,P as fe,M as pe,k as pt,n as ht,F as Xn,l as dt,p as gt,t as vt,q as Zt,s as Gt,S as mt,v as he,x as de,y as _t,z as St,A as Et,B as ge,C as ve,D as me,E as _e,G as Se,I as Ee,w as wt,r as yt}from"./index-Bl5wybpb.js";const we={timeline:{containerId:"timeline_container",containerWidth:"",containerHeight:220,activeFlag:0,offset:0,flagWidth:130,init:!1,rulerNum:10,rulerMarkers:[{time:null,position:null}]},flags:[{time:"2024-01-01",location:[-74,40.6],title:"特朗普",content:"纽约州法院取消特朗普前私人律师朱利安尼的律师资格",img:"https://mediabluk.cnr.cn/record/img/cnr/CNRCDP/2023/0609/a9597944f437430fbee597cab4c9bf7e10.jpg",row:1},{time:"2024-03-01",location:[0,51],title:"伦敦",content:"伦敦股市",img:"https://pic.uhzcdn.com/onlinetips/cdn/2017/05/1-3.jpg",row:2},{time:"2024-06-01",location:[103,1],title:"中日防长",img:"https://p1.itc.cn/images01/20210618/18d5e60acfba401c9d24d808a1eb9fd6.jpeg",content:"日中防长于新加坡举行会谈",row:"middle"},{time:"2024-06-10",location:[2.45,49],title:"巴黎抗议",content:"极右翼首轮投票领先，巴黎、里昂爆发抗议活动",img:"https://gocity.com.cn/upload/image/20230918/102826656.jpg",row:null},{time:"2024-06-25",location:[139.6,35.6],title:"东京选情",content:"选情调查：东京都知事选举小池百合子暂时领先",img:"https://media.istockphoto.com/id/1623820103/ja/%E3%82%B9%E3%83%88%E3%83%83%E3%82%AF%E3%83%95%E3%82%A9%E3%83%88/%E6%9D%B1%E4%BA%AC%E3%81%AE%E8%A1%97%E4%B8%A6%E3%81%BF%E7%A9%BA%E6%92%AE.webp?s=2048x2048&w=is&k=20&c=wWZ6HivZ4fTAngwRO0I6fC1PgHXnHIN0mAniUAbWlyk=",row:null},{time:"2024-07-03",title:"北京入境",content:"上半年北京口岸入境外国人同比增两倍多",location:[116,39],img:"https://q7.itc.cn/q_70/images01/20240604/74cecbb1f3794f2bbac29af8d84deded.jpeg",row:null}]},ye="/assets/icon-BjmIwxff.jpg",Tn=24*60*60*1e3;class Me{constructor(){this.flagLayer={top:null,middle:null,bottom:null},this.dateMap={}}render(n){let i=n.timeline;this.time2Date(n);const e=document.getElementById(`${i.containerId}`);i.containerWidth=e.offsetWidth,i.containerHeight=i.containerHeight,i.offset=0,i.offsetOld=0,i.flagHeight=i.containerHeight*.95*.65/3,i.flagMargin=i.containerHeight*.9*.35/4,this.flagLayer.middle=i.flagMargin*2+i.flagHeight,this.flagLayer.top=i.flagMargin,this.flagLayer.bottom=i.flagMargin*3+i.flagHeight*2,this.renderFlags(n)}renderFlags(n){let i=n.timeline,e=n.flags;i.ruler?this.ruler=i.ruler:(this.ruler=this.calRuler(e,i.containerWidth*.5-i.flagWidth),i.ruler=this.ruler),this.setRows(e,i),this.renderRulerMarkers(n)}time2Date(n){n.flags.forEach(e=>{e.time=new Date(e.time)})}renderRulerMarkers(n){var i=n.timeline,e=n.flags;this.sortFlags(e),this.genRulerMarkerTime(i,e)}genRulerMarkerTime(n,i){this.dateMap={};var e=this.calInterval(i[0].time,i[i.length-1].time);const r=this.calBaseDay(n,i),o=e/((n.rulerNum-1)/2);var l=n.rulerMarkers;for(let u=0;u<n.rulerNum;u++){let g={time:null,position:null,content:null};l[u]=g,l[u].time=new Date,l[u].time.setTime(r.getTime()+u*o*Tn),l[u].position=this.time2Position(l[u].time,i,n);const{content:d,timeType:a}=this.time2Display(l[u].time);l[u].content=d,l[u].timeType=a}}time2Display(n){let i=n.getFullYear(),e=n.getMonth()+1,r=n.getDate(),o="",l="";return i<0&&(o="BC",i=-i),this.dateMap[i]?(o+=`${e}月${r}日`,l="month"):(this.dateMap[i]=!0,o+=`${i}年${e}月${r}日`,l="year"),{content:o,timeType:l}}calBaseDay(n,i){const e=this.calInterval(i[0].time,i[i.length-1].time),r=new Date;return r.setTime(i[0].time.getTime()-e*Tn),r}time2Position(n,i,e){const r=i[0].time,o=(n.getTime()-r.getTime())/Tn;return e.containerWidth*.5+o*this.ruler}setRows(n,i){n[0].time,n.forEach((e,r,o)=>{e.position=this.time2Position(e.time,o,i),r>0&&this.calInterval(o[r-1].time,e.time)*this.ruler<i.flagWidth?r>1&&this.calInterval(o[r-2].time,e.time)*this.ruler<i.flagWidth?e.row=this.restRow(o[r-1].row,o[r-2].row):e.row=this.nextRow(o[r-1].row):e.row="middle",e.layer=this.flagLayer[e.row]})}restRow(n,i){var e=["middle","top","bottom"];let r=3-e.indexOf(n)-e.indexOf(i);return e[r]}nextRow(n){var i=["middle","top","bottom"];let e=(i.indexOf(n)+1)%3;return i[e]}positionFlags(n){let i=n.timeline,e=n.flags,r=e[0].position-e[i.activeFlag].position;i.offsetOld=i.offset,i.offset=r}sortFlags(n){return n.sort((i,e)=>this.calTime(i.time)-this.calTime(e.time)),n}calInterval(n,i){const e=new Date(n),o=new Date(i).getTime()-e.getTime();return Math.ceil(o/Tn)}calTime(n){return this.calInterval("0001-01-01",n)}calRuler(n,i){return this.sortFlags(n),i/this.calInterval(n[0].time,n[n.length-1].time)}}const lt=t=>(Zt("data-v-6dcdbcbf"),t=t(),Gt(),t),Re={id:"timeline_container"},Te={id:"toolbox"},Ne=lt(()=>q("div",{class:"baseline_v"},null,-1)),Ie=lt(()=>q("div",{class:"baseline_h"},null,-1)),$e={class:"flagwraper"},Ae=["onClick"],Pe=["src"],Ce={class:"content"},De=lt(()=>q("div",{class:"pole"},[q("div",{class:"poleheader"}),q("div",{class:"polefooter"})],-1)),Le={__name:"Timeline",setup(t){const n=ce(),i=we,e=i.flags,r=i.timeline,o=st(!0),l=Yt();st(1);const u=new Me;Xt(()=>{g()});const g=()=>{u.render(i),o.value=!o.value},d=m=>{a(m),o.value=!o.value;const v=e[m];l.commit("updateLocation",v.location),l.commit("updateContent",{content:v.content,img:v.img})},a=m=>{r.activeFlag=m,u.positionFlags(i),r.init=!0},c=m=>{m==="magnify"?(i.timeline.ruler*=1.5,i.timeline.rulerNum*=1.5):m==="reduce"?(i.timeline.ruler/=1.5,i.timeline.rulerNum/=1.5):m==="home"&&n.replace({name:"news"}),g()},s=m=>{m.clientX},p=m=>{},h=()=>{};return(m,v)=>{const y=ft("TimelineFlag"),E=ft("TimelineDrag");return nn(),tn("div",Re,[q("div",Te,[ln(U(se),{style:{fontSize:"20px"},onClick:v[0]||(v[0]=S=>c("home"))}),ln(U(fe),{style:{fontSize:"20px"},onClick:v[1]||(v[1]=S=>c("magnify"))}),ln(U(pe),{style:{fontSize:"20px"},onClick:v[2]||(v[2]=S=>c("reduce"))})]),Ne,Ie,pt((nn(),tn("div",{class:"dragable_container",style:ht({left:U(r).offset+"px"}),onMousedown:s,onMousemove:p,onMouseup:h},[q("div",$e,[(nn(!0),tn(Xn,null,dt(U(e),(S,_)=>pt((nn(),tn("div",{key:_,class:"timeflag",onClick:M=>d(_)},[q("div",{class:gt(["marker",{marker_active:_==U(r).activeFlag}])},[q("img",{class:"icon",src:U(ye)},null,8,Pe),q("div",Ce,vt(S.title),1)],2),De],8,Ae)),[[y,{flag:S,timeline:U(r),refreshFlag:o.value}]])),128)),(nn(!0),tn(Xn,null,dt(U(r).rulerMarkers,(S,_)=>(nn(),tn("div",{key:_,class:gt(["rulermarker",{year_type:S.timeType=="year"}]),style:ht({left:S.position+"px"})},vt(S.content),7))),128))])],36)),[[E,{timeline:U(r),refreshFlag:o.value}]])])}}},Fe=ot(Le,[["__scopeId","data-v-6dcdbcbf"]]);class an{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const i=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const o=i[r],l=n+o,u=Math.abs(n)<Math.abs(o)?n-(l-o):o-(l-n);u&&(i[e++]=u),n=l}return i[e]=n,this._n=e+1,this}valueOf(){const n=this._partials;let i=this._n,e,r,o,l=0;if(i>0){for(l=n[--i];i>0&&(e=l,r=n[--i],l=e+r,o=r-(l-e),!o););i>0&&(o<0&&n[i-1]<0||o>0&&n[i-1]>0)&&(r=o*2,e=l+r,r==e-l&&(l=e))}return l}}function*ze(t){for(const n of t)yield*n}function Vt(t){return Array.from(ze(t))}function ke(t){return typeof t=="string"?new mt([[document.querySelector(t)]],[document.documentElement]):new mt([[t]],he)}function Oe(t,n){n||(n=[]);var i=t?Math.min(n.length,t.length):0,e=n.slice(),r;return function(o){for(r=0;r<i;++r)e[r]=t[r]*(1-o)+n[r]*o;return e}}function Be(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function He(t,n){var i=n?n.length:0,e=t?Math.min(i,t.length):0,r=new Array(e),o=new Array(i),l;for(l=0;l<e;++l)r[l]=at(t[l],n[l]);for(;l<i;++l)o[l]=n[l];return function(u){for(l=0;l<e;++l)o[l]=r[l](u);return o}}function We(t,n){var i=new Date;return t=+t,n=+n,function(e){return i.setTime(t*(1-e)+n*e),i}}function qe(t,n){var i={},e={},r;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(r in n)r in t?i[r]=at(t[r],n[r]):e[r]=n[r];return function(o){for(r in i)e[r]=i[r](o);return e}}function at(t,n){var i=typeof n,e;return n==null||i==="boolean"?de(n):(i==="number"?_t:i==="string"?(e=St(n))?(n=e,Et):ge:n instanceof St?Et:n instanceof Date?We:Be(n)?Oe:Array.isArray(n)?He:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?qe:_t)(t,n)}function Ye(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function Xe(t,n){return fetch(t,n).then(Ye)}var C=1e-6,Ze=1e-12,N=Math.PI,Z=N/2,Mt=N/4,V=N*2,x=180/N,W=N/180,z=Math.abs,Ge=Math.atan,hn=Math.atan2,F=Math.cos,L=Math.sin,Ve=Math.sign||function(t){return t>0?1:t<0?-1:0},en=Math.sqrt;function Ue(t){return t>1?0:t<-1?N:Math.acos(t)}function un(t){return t>1?Z:t<-1?-Z:Math.asin(t)}function G(){}function Cn(t,n){t&&Tt.hasOwnProperty(t.type)&&Tt[t.type](t,n)}var Rt={Feature:function(t,n){Cn(t.geometry,n)},FeatureCollection:function(t,n){for(var i=t.features,e=-1,r=i.length;++e<r;)Cn(i[e].geometry,n)}},Tt={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)t=i[e],n.point(t[0],t[1],t[2])},LineString:function(t,n){Zn(t.coordinates,n,0)},MultiLineString:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)Zn(i[e],n,0)},Polygon:function(t,n){Nt(t.coordinates,n)},MultiPolygon:function(t,n){for(var i=t.coordinates,e=-1,r=i.length;++e<r;)Nt(i[e],n)},GeometryCollection:function(t,n){for(var i=t.geometries,e=-1,r=i.length;++e<r;)Cn(i[e],n)}};function Zn(t,n,i){var e=-1,r=t.length-i,o;for(n.lineStart();++e<r;)o=t[e],n.point(o[0],o[1],o[2]);n.lineEnd()}function Nt(t,n){var i=-1,e=t.length;for(n.polygonStart();++i<e;)Zn(t[i],n,1);n.polygonEnd()}function fn(t,n){t&&Rt.hasOwnProperty(t.type)?Rt[t.type](t,n):Cn(t,n)}function Gn(t){return[hn(t[1],t[0]),un(t[2])]}function dn(t){var n=t[0],i=t[1],e=F(i);return[e*F(n),e*L(n),L(i)]}function Nn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Dn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Hn(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function In(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Vn(t){var n=en(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function Un(t,n){function i(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(i.invert=function(e,r){return e=n.invert(e,r),e&&t.invert(e[0],e[1])}),i}function Jn(t,n){return z(t)>N&&(t-=Math.round(t/V)*V),[t,n]}Jn.invert=Jn;function Je(t,n,i){return(t%=V)?n||i?Un($t(t),At(n,i)):$t(t):n||i?At(n,i):Jn}function It(t){return function(n,i){return n+=t,z(n)>N&&(n-=Math.round(n/V)*V),[n,i]}}function $t(t){var n=It(t);return n.invert=It(-t),n}function At(t,n){var i=F(t),e=L(t),r=F(n),o=L(n);function l(u,g){var d=F(g),a=F(u)*d,c=L(u)*d,s=L(g),p=s*i+a*e;return[hn(c*r-p*o,a*i-s*e),un(p*r+c*o)]}return l.invert=function(u,g){var d=F(g),a=F(u)*d,c=L(u)*d,s=L(g),p=s*r-c*o;return[hn(c*r+s*o,a*i+p*e),un(p*i-a*e)]},l}function je(t,n,i,e,r,o){if(i){var l=F(n),u=L(n),g=e*i;r==null?(r=n+e*V,o=n-g/2):(r=Pt(l,r),o=Pt(l,o),(e>0?r<o:r>o)&&(r+=e*V));for(var d,a=r;e>0?a>o:a<o;a-=g)d=Gn([l,-u*F(a),-u*L(a)]),t.point(d[0],d[1])}}function Pt(t,n){n=dn(n),n[0]-=t,Vn(n);var i=Ue(-n[1]);return((-n[2]<0?-i:i)+V-C)%V}function Ut(){var t=[],n;return{point:function(i,e,r){n.push([i,e,r])},lineStart:function(){t.push(n=[])},lineEnd:G,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],n=null,i}}}function Pn(t,n){return z(t[0]-n[0])<C&&z(t[1]-n[1])<C}function $n(t,n,i,e){this.x=t,this.z=n,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function Jt(t,n,i,e,r){var o=[],l=[],u,g;if(t.forEach(function(h){if(!((m=h.length-1)<=0)){var m,v=h[0],y=h[m],E;if(Pn(v,y)){if(!v[2]&&!y[2]){for(r.lineStart(),u=0;u<m;++u)r.point((v=h[u])[0],v[1]);r.lineEnd();return}y[0]+=2*C}o.push(E=new $n(v,h,null,!0)),l.push(E.o=new $n(v,null,E,!1)),o.push(E=new $n(y,h,null,!1)),l.push(E.o=new $n(y,null,E,!0))}}),!!o.length){for(l.sort(n),Ct(o),Ct(l),u=0,g=l.length;u<g;++u)l[u].e=i=!i;for(var d=o[0],a,c;;){for(var s=d,p=!0;s.v;)if((s=s.n)===d)return;a=s.z,r.lineStart();do{if(s.v=s.o.v=!0,s.e){if(p)for(u=0,g=a.length;u<g;++u)r.point((c=a[u])[0],c[1]);else e(s.x,s.n.x,1,r);s=s.n}else{if(p)for(a=s.p.z,u=a.length-1;u>=0;--u)r.point((c=a[u])[0],c[1]);else e(s.x,s.p.x,-1,r);s=s.p}s=s.o,a=s.z,p=!p}while(!s.v);r.lineEnd()}}}function Ct(t){if(n=t.length){for(var n,i=0,e=t[0],r;++i<n;)e.n=r=t[i],r.p=e,e=r;e.n=r=t[0],r.p=e}}function Wn(t){return z(t[0])<=N?t[0]:Ve(t[0])*((z(t[0])+N)%V-N)}function Ke(t,n){var i=Wn(n),e=n[1],r=L(e),o=[L(i),-F(i),0],l=0,u=0,g=new an;r===1?e=Z+C:r===-1&&(e=-Z-C);for(var d=0,a=t.length;d<a;++d)if(s=(c=t[d]).length)for(var c,s,p=c[s-1],h=Wn(p),m=p[1]/2+Mt,v=L(m),y=F(m),E=0;E<s;++E,h=_,v=R,y=A,p=S){var S=c[E],_=Wn(S),M=S[1]/2+Mt,R=L(M),A=F(M),I=_-h,$=I>=0?1:-1,D=$*I,w=D>N,B=v*R;if(g.add(hn(B*$*L(D),y*A+B*F(D))),l+=w?I+$*V:I,w^h>=i^_>=i){var k=Dn(dn(p),dn(S));Vn(k);var P=Dn(o,k);Vn(P);var f=(w^I>=0?-1:1)*un(P[2]);(e>f||e===f&&(k[0]||k[1]))&&(u+=w^I>=0?1:-1)}}return(l<-C||l<C&&g<-Ze)^u&1}function jt(t,n,i,e){return function(r){var o=n(r),l=Ut(),u=n(l),g=!1,d,a,c,s={point:p,lineStart:m,lineEnd:v,polygonStart:function(){s.point=y,s.lineStart=E,s.lineEnd=S,a=[],d=[]},polygonEnd:function(){s.point=p,s.lineStart=m,s.lineEnd=v,a=Vt(a);var _=Ke(d,e);a.length?(g||(r.polygonStart(),g=!0),Jt(a,xe,_,i,r)):_&&(g||(r.polygonStart(),g=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),g&&(r.polygonEnd(),g=!1),a=d=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(_,M){t(_,M)&&r.point(_,M)}function h(_,M){o.point(_,M)}function m(){s.point=h,o.lineStart()}function v(){s.point=p,o.lineEnd()}function y(_,M){c.push([_,M]),u.point(_,M)}function E(){u.lineStart(),c=[]}function S(){y(c[0][0],c[0][1]),u.lineEnd();var _=u.clean(),M=l.result(),R,A=M.length,I,$,D;if(c.pop(),d.push(c),c=null,!!A){if(_&1){if($=M[0],(I=$.length-1)>0){for(g||(r.polygonStart(),g=!0),r.lineStart(),R=0;R<I;++R)r.point((D=$[R])[0],D[1]);r.lineEnd()}return}A>1&&_&2&&M.push(M.pop().concat(M.shift())),a.push(M.filter(Qe))}}return s}}function Qe(t){return t.length>1}function xe(t,n){return((t=t.x)[0]<0?t[1]-Z-C:Z-t[1])-((n=n.x)[0]<0?n[1]-Z-C:Z-n[1])}const Dt=jt(function(){return!0},be,ti,[-N,-Z]);function be(t){var n=NaN,i=NaN,e=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,l){var u=o>0?N:-N,g=z(o-n);z(g-N)<C?(t.point(n,i=(i+l)/2>0?Z:-Z),t.point(e,i),t.lineEnd(),t.lineStart(),t.point(u,i),t.point(o,i),r=0):e!==u&&g>=N&&(z(n-e)<C&&(n-=e*C),z(o-u)<C&&(o-=u*C),i=ni(n,i,o,l),t.point(e,i),t.lineEnd(),t.lineStart(),t.point(u,i),r=0),t.point(n=o,i=l),e=u},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-r}}}function ni(t,n,i,e){var r,o,l=L(t-i);return z(l)>C?Ge((L(n)*(o=F(e))*L(i)-L(e)*(r=F(n))*L(t))/(r*o*l)):(n+e)/2}function ti(t,n,i,e){var r;if(t==null)r=i*Z,e.point(-N,r),e.point(0,r),e.point(N,r),e.point(N,0),e.point(N,-r),e.point(0,-r),e.point(-N,-r),e.point(-N,0),e.point(-N,r);else if(z(t[0]-n[0])>C){var o=t[0]<n[0]?N:-N;r=i*o/2,e.point(-o,r),e.point(0,r),e.point(o,r)}else e.point(n[0],n[1])}function ei(t){var n=F(t),i=2*W,e=n>0,r=z(n)>C;function o(a,c,s,p){je(p,t,i,s,a,c)}function l(a,c){return F(a)*F(c)>n}function u(a){var c,s,p,h,m;return{lineStart:function(){h=p=!1,m=1},point:function(v,y){var E=[v,y],S,_=l(v,y),M=e?_?0:d(v,y):_?d(v+(v<0?N:-N),y):0;if(!c&&(h=p=_)&&a.lineStart(),_!==p&&(S=g(c,E),(!S||Pn(c,S)||Pn(E,S))&&(E[2]=1)),_!==p)m=0,_?(a.lineStart(),S=g(E,c),a.point(S[0],S[1])):(S=g(c,E),a.point(S[0],S[1],2),a.lineEnd()),c=S;else if(r&&c&&e^_){var R;!(M&s)&&(R=g(E,c,!0))&&(m=0,e?(a.lineStart(),a.point(R[0][0],R[0][1]),a.point(R[1][0],R[1][1]),a.lineEnd()):(a.point(R[1][0],R[1][1]),a.lineEnd(),a.lineStart(),a.point(R[0][0],R[0][1],3)))}_&&(!c||!Pn(c,E))&&a.point(E[0],E[1]),c=E,p=_,s=M},lineEnd:function(){p&&a.lineEnd(),c=null},clean:function(){return m|(h&&p)<<1}}}function g(a,c,s){var p=dn(a),h=dn(c),m=[1,0,0],v=Dn(p,h),y=Nn(v,v),E=v[0],S=y-E*E;if(!S)return!s&&a;var _=n*y/S,M=-n*E/S,R=Dn(m,v),A=In(m,_),I=In(v,M);Hn(A,I);var $=R,D=Nn(A,$),w=Nn($,$),B=D*D-w*(Nn(A,A)-1);if(!(B<0)){var k=en(B),P=In($,(-D-k)/w);if(Hn(P,A),P=Gn(P),!s)return P;var f=a[0],T=c[0],O=a[1],H=c[1],Y;T<f&&(Y=f,f=T,T=Y);var vn=T-f,K=z(vn-N)<C,rn=K||vn<C;if(!K&&H<O&&(Y=O,O=H,H=Y),rn?K?O+H>0^P[1]<(z(P[0]-f)<C?O:H):O<=P[1]&&P[1]<=H:vn>N^(f<=P[0]&&P[0]<=T)){var Q=In($,(-D+k)/w);return Hn(Q,A),[P,Gn(Q)]}}}function d(a,c){var s=e?t:N-t,p=0;return a<-s?p|=1:a>s&&(p|=2),c<-s?p|=4:c>s&&(p|=8),p}return jt(l,u,o,e?[0,-t]:[-N,t-N])}function ii(t,n,i,e,r,o){var l=t[0],u=t[1],g=n[0],d=n[1],a=0,c=1,s=g-l,p=d-u,h;if(h=i-l,!(!s&&h>0)){if(h/=s,s<0){if(h<a)return;h<c&&(c=h)}else if(s>0){if(h>c)return;h>a&&(a=h)}if(h=r-l,!(!s&&h<0)){if(h/=s,s<0){if(h>c)return;h>a&&(a=h)}else if(s>0){if(h<a)return;h<c&&(c=h)}if(h=e-u,!(!p&&h>0)){if(h/=p,p<0){if(h<a)return;h<c&&(c=h)}else if(p>0){if(h>c)return;h>a&&(a=h)}if(h=o-u,!(!p&&h<0)){if(h/=p,p<0){if(h>c)return;h>a&&(a=h)}else if(p>0){if(h<a)return;h<c&&(c=h)}return a>0&&(t[0]=l+a*s,t[1]=u+a*p),c<1&&(n[0]=l+c*s,n[1]=u+c*p),!0}}}}}var mn=1e9,An=-mn;function ri(t,n,i,e){function r(d,a){return t<=d&&d<=i&&n<=a&&a<=e}function o(d,a,c,s){var p=0,h=0;if(d==null||(p=l(d,c))!==(h=l(a,c))||g(d,a)<0^c>0)do s.point(p===0||p===3?t:i,p>1?e:n);while((p=(p+c+4)%4)!==h);else s.point(a[0],a[1])}function l(d,a){return z(d[0]-t)<C?a>0?0:3:z(d[0]-i)<C?a>0?2:1:z(d[1]-n)<C?a>0?1:0:a>0?3:2}function u(d,a){return g(d.x,a.x)}function g(d,a){var c=l(d,1),s=l(a,1);return c!==s?c-s:c===0?a[1]-d[1]:c===1?d[0]-a[0]:c===2?d[1]-a[1]:a[0]-d[0]}return function(d){var a=d,c=Ut(),s,p,h,m,v,y,E,S,_,M,R,A={point:I,lineStart:B,lineEnd:k,polygonStart:D,polygonEnd:w};function I(f,T){r(f,T)&&a.point(f,T)}function $(){for(var f=0,T=0,O=p.length;T<O;++T)for(var H=p[T],Y=1,vn=H.length,K=H[0],rn,Q,Rn=K[0],sn=K[1];Y<vn;++Y)rn=Rn,Q=sn,K=H[Y],Rn=K[0],sn=K[1],Q<=e?sn>e&&(Rn-rn)*(e-Q)>(sn-Q)*(t-rn)&&++f:sn<=e&&(Rn-rn)*(e-Q)<(sn-Q)*(t-rn)&&--f;return f}function D(){a=c,s=[],p=[],R=!0}function w(){var f=$(),T=R&&f,O=(s=Vt(s)).length;(T||O)&&(d.polygonStart(),T&&(d.lineStart(),o(null,null,1,d),d.lineEnd()),O&&Jt(s,u,f,o,d),d.polygonEnd()),a=d,s=p=h=null}function B(){A.point=P,p&&p.push(h=[]),M=!0,_=!1,E=S=NaN}function k(){s&&(P(m,v),y&&_&&c.rejoin(),s.push(c.result())),A.point=I,_&&a.lineEnd()}function P(f,T){var O=r(f,T);if(p&&h.push([f,T]),M)m=f,v=T,y=O,M=!1,O&&(a.lineStart(),a.point(f,T));else if(O&&_)a.point(f,T);else{var H=[E=Math.max(An,Math.min(mn,E)),S=Math.max(An,Math.min(mn,S))],Y=[f=Math.max(An,Math.min(mn,f)),T=Math.max(An,Math.min(mn,T))];ii(H,Y,t,n,i,e)?(_||(a.lineStart(),a.point(H[0],H[1])),a.point(Y[0],Y[1]),O||a.lineEnd(),R=!1):O&&(a.lineStart(),a.point(f,T),R=!1)}E=f,S=T,_=O}return A}}const jn=t=>t;var qn=new an,Kn=new an,Kt,Qt,Qn,xn,b={point:G,lineStart:G,lineEnd:G,polygonStart:function(){b.lineStart=oi,b.lineEnd=ai},polygonEnd:function(){b.lineStart=b.lineEnd=b.point=G,qn.add(z(Kn)),Kn=new an},result:function(){var t=qn/2;return qn=new an,t}};function oi(){b.point=li}function li(t,n){b.point=xt,Kt=Qn=t,Qt=xn=n}function xt(t,n){Kn.add(xn*t-Qn*n),Qn=t,xn=n}function ai(){xt(Kt,Qt)}var gn=1/0,Ln=gn,yn=-gn,Fn=yn,zn={point:ui,lineStart:G,lineEnd:G,polygonStart:G,polygonEnd:G,result:function(){var t=[[gn,Ln],[yn,Fn]];return yn=Fn=-(Ln=gn=1/0),t}};function ui(t,n){t<gn&&(gn=t),t>yn&&(yn=t),n<Ln&&(Ln=n),n>Fn&&(Fn=n)}var bn=0,nt=0,_n=0,kn=0,On=0,pn=0,tt=0,et=0,Sn=0,bt,ne,J,j,X={point:cn,lineStart:Lt,lineEnd:Ft,polygonStart:function(){X.lineStart=fi,X.lineEnd=pi},polygonEnd:function(){X.point=cn,X.lineStart=Lt,X.lineEnd=Ft},result:function(){var t=Sn?[tt/Sn,et/Sn]:pn?[kn/pn,On/pn]:_n?[bn/_n,nt/_n]:[NaN,NaN];return bn=nt=_n=kn=On=pn=tt=et=Sn=0,t}};function cn(t,n){bn+=t,nt+=n,++_n}function Lt(){X.point=ci}function ci(t,n){X.point=si,cn(J=t,j=n)}function si(t,n){var i=t-J,e=n-j,r=en(i*i+e*e);kn+=r*(J+t)/2,On+=r*(j+n)/2,pn+=r,cn(J=t,j=n)}function Ft(){X.point=cn}function fi(){X.point=hi}function pi(){te(bt,ne)}function hi(t,n){X.point=te,cn(bt=J=t,ne=j=n)}function te(t,n){var i=t-J,e=n-j,r=en(i*i+e*e);kn+=r*(J+t)/2,On+=r*(j+n)/2,pn+=r,r=j*t-J*n,tt+=r*(J+t),et+=r*(j+n),Sn+=r*3,cn(J=t,j=n)}function ee(t){this._context=t}ee.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,V);break}}},result:G};var it=new an,Yn,ie,re,En,wn,Mn={point:G,lineStart:function(){Mn.point=di},lineEnd:function(){Yn&&oe(ie,re),Mn.point=G},polygonStart:function(){Yn=!0},polygonEnd:function(){Yn=null},result:function(){var t=+it;return it=new an,t}};function di(t,n){Mn.point=oe,ie=En=t,re=wn=n}function oe(t,n){En-=t,wn-=n,it.add(en(En*En+wn*wn)),En=t,wn=n}let zt,Bn,kt,Ot;class Bt{constructor(n){this._append=n==null?le:gi(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,i){switch(this._point){case 0:{this._append`M${n},${i}`,this._point=1;break}case 1:{this._append`L${n},${i}`;break}default:{if(this._append`M${n},${i}`,this._radius!==kt||this._append!==Bn){const e=this._radius,r=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,kt=e,Bn=this._append,Ot=this._,this._=r}this._+=Ot;break}}}result(){const n=this._;return this._="",n.length?n:null}}function le(t){let n=1;this._+=t[0];for(const i=t.length;n<i;++n)this._+=arguments[n]+t[n]}function gi(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return le;if(n!==zt){const i=10**n;zt=n,Bn=function(r){let o=1;this._+=r[0];for(const l=r.length;o<l;++o)this._+=Math.round(arguments[o]*i)/i+r[o]}}return Bn}function vi(t,n){let i=3,e=4.5,r,o;function l(u){return u&&(typeof e=="function"&&o.pointRadius(+e.apply(this,arguments)),fn(u,r(o))),o.result()}return l.area=function(u){return fn(u,r(b)),b.result()},l.measure=function(u){return fn(u,r(Mn)),Mn.result()},l.bounds=function(u){return fn(u,r(zn)),zn.result()},l.centroid=function(u){return fn(u,r(X)),X.result()},l.projection=function(u){return arguments.length?(r=u==null?(t=null,jn):(t=u).stream,l):t},l.context=function(u){return arguments.length?(o=u==null?(n=null,new Bt(i)):new ee(n=u),typeof e!="function"&&o.pointRadius(e),l):n},l.pointRadius=function(u){return arguments.length?(e=typeof u=="function"?u:(o.pointRadius(+u),+u),l):e},l.digits=function(u){if(!arguments.length)return i;if(u==null)i=null;else{const g=Math.floor(u);if(!(g>=0))throw new RangeError(`invalid digits: ${u}`);i=g}return n===null&&(o=new Bt(i)),l},l.projection(t).digits(i).context(n)}function ut(t){return function(n){var i=new rt;for(var e in t)i[e]=t[e];return i.stream=n,i}}function rt(){}rt.prototype={constructor:rt,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function ct(t,n,i){var e=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),e!=null&&t.clipExtent(null),fn(i,t.stream(zn)),n(zn.result()),e!=null&&t.clipExtent(e),t}function ae(t,n,i){return ct(t,function(e){var r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],l=Math.min(r/(e[1][0]-e[0][0]),o/(e[1][1]-e[0][1])),u=+n[0][0]+(r-l*(e[1][0]+e[0][0]))/2,g=+n[0][1]+(o-l*(e[1][1]+e[0][1]))/2;t.scale(150*l).translate([u,g])},i)}function mi(t,n,i){return ae(t,[[0,0],n],i)}function _i(t,n,i){return ct(t,function(e){var r=+n,o=r/(e[1][0]-e[0][0]),l=(r-o*(e[1][0]+e[0][0]))/2,u=-o*e[0][1];t.scale(150*o).translate([l,u])},i)}function Si(t,n,i){return ct(t,function(e){var r=+n,o=r/(e[1][1]-e[0][1]),l=-o*e[0][0],u=(r-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([l,u])},i)}var Ht=16,Ei=F(30*W);function Wt(t,n){return+n?yi(t,n):wi(t)}function wi(t){return ut({point:function(n,i){n=t(n,i),this.stream.point(n[0],n[1])}})}function yi(t,n){function i(e,r,o,l,u,g,d,a,c,s,p,h,m,v){var y=d-e,E=a-r,S=y*y+E*E;if(S>4*n&&m--){var _=l+s,M=u+p,R=g+h,A=en(_*_+M*M+R*R),I=un(R/=A),$=z(z(R)-1)<C||z(o-c)<C?(o+c)/2:hn(M,_),D=t($,I),w=D[0],B=D[1],k=w-e,P=B-r,f=E*k-y*P;(f*f/S>n||z((y*k+E*P)/S-.5)>.3||l*s+u*p+g*h<Ei)&&(i(e,r,o,l,u,g,w,B,$,_/=A,M/=A,R,m,v),v.point(w,B),i(w,B,$,_,M,R,d,a,c,s,p,h,m,v))}}return function(e){var r,o,l,u,g,d,a,c,s,p,h,m,v={point:y,lineStart:E,lineEnd:_,polygonStart:function(){e.polygonStart(),v.lineStart=M},polygonEnd:function(){e.polygonEnd(),v.lineStart=E}};function y(I,$){I=t(I,$),e.point(I[0],I[1])}function E(){c=NaN,v.point=S,e.lineStart()}function S(I,$){var D=dn([I,$]),w=t(I,$);i(c,s,a,p,h,m,c=w[0],s=w[1],a=I,p=D[0],h=D[1],m=D[2],Ht,e),e.point(c,s)}function _(){v.point=y,e.lineEnd()}function M(){E(),v.point=R,v.lineEnd=A}function R(I,$){S(r=I,$),o=c,l=s,u=p,g=h,d=m,v.point=S}function A(){i(c,s,a,p,h,m,o,l,r,u,g,d,Ht,e),v.lineEnd=_,_()}return v}}var Mi=ut({point:function(t,n){this.stream.point(t*W,n*W)}});function Ri(t){return ut({point:function(n,i){var e=t(n,i);return this.stream.point(e[0],e[1])}})}function Ti(t,n,i,e,r){function o(l,u){return l*=e,u*=r,[n+t*l,i-t*u]}return o.invert=function(l,u){return[(l-n)/t*e,(i-u)/t*r]},o}function qt(t,n,i,e,r,o){if(!o)return Ti(t,n,i,e,r);var l=F(o),u=L(o),g=l*t,d=u*t,a=l/t,c=u/t,s=(u*i-l*n)/t,p=(u*n+l*i)/t;function h(m,v){return m*=e,v*=r,[g*m-d*v+n,i-d*m-g*v]}return h.invert=function(m,v){return[e*(a*m-c*v+s),r*(p-c*m-a*v)]},h}function Ni(t){return Ii(function(){return t})()}function Ii(t){var n,i=150,e=480,r=250,o=0,l=0,u=0,g=0,d=0,a,c=0,s=1,p=1,h=null,m=Dt,v=null,y,E,S,_=jn,M=.5,R,A,I,$,D;function w(f){return I(f[0]*W,f[1]*W)}function B(f){return f=I.invert(f[0],f[1]),f&&[f[0]*x,f[1]*x]}w.stream=function(f){return $&&D===f?$:$=Mi(Ri(a)(m(R(_(D=f)))))},w.preclip=function(f){return arguments.length?(m=f,h=void 0,P()):m},w.postclip=function(f){return arguments.length?(_=f,v=y=E=S=null,P()):_},w.clipAngle=function(f){return arguments.length?(m=+f?ei(h=f*W):(h=null,Dt),P()):h*x},w.clipExtent=function(f){return arguments.length?(_=f==null?(v=y=E=S=null,jn):ri(v=+f[0][0],y=+f[0][1],E=+f[1][0],S=+f[1][1]),P()):v==null?null:[[v,y],[E,S]]},w.scale=function(f){return arguments.length?(i=+f,k()):i},w.translate=function(f){return arguments.length?(e=+f[0],r=+f[1],k()):[e,r]},w.center=function(f){return arguments.length?(o=f[0]%360*W,l=f[1]%360*W,k()):[o*x,l*x]},w.rotate=function(f){return arguments.length?(u=f[0]%360*W,g=f[1]%360*W,d=f.length>2?f[2]%360*W:0,k()):[u*x,g*x,d*x]},w.angle=function(f){return arguments.length?(c=f%360*W,k()):c*x},w.reflectX=function(f){return arguments.length?(s=f?-1:1,k()):s<0},w.reflectY=function(f){return arguments.length?(p=f?-1:1,k()):p<0},w.precision=function(f){return arguments.length?(R=Wt(A,M=f*f),P()):en(M)},w.fitExtent=function(f,T){return ae(w,f,T)},w.fitSize=function(f,T){return mi(w,f,T)},w.fitWidth=function(f,T){return _i(w,f,T)},w.fitHeight=function(f,T){return Si(w,f,T)};function k(){var f=qt(i,0,0,s,p,c).apply(null,n(o,l)),T=qt(i,e-f[0],r-f[1],s,p,c);return a=Je(u,g,d),A=Un(n,T),I=Un(a,A),R=Wt(A,M),P()}function P(){return $=D=null,w}return function(){return n=t.apply(this,arguments),w.invert=n.invert&&B,k()}}function $i(t){return function(n,i){var e=en(n*n+i*i),r=t(e),o=L(r),l=F(r);return[hn(n*o,e*l),un(e&&i*o/e)]}}function ue(t,n){return[F(n)*L(t),L(n)]}ue.invert=$i(un);function Ai(){return Ni(ue).scale(249.5).clipAngle(90+C)}const Pi=t=>(Zt("data-v-2d269123"),t=t(),Gt(),t),Ci=Pi(()=>q("div",{id:"globe",class:"globe-container"},null,-1)),Di={class:"card"},Li=["src"],on=1e3,Fi="lightblue",zi="black",ki="#bbb",Oi=ve({__name:"Earth",setup(t){const n=Yt(),i=me({cardContent:"纽约州法院取消特朗普前私人律师朱利安尼的律师资格",cardImg:"https://mediabluk.cnr.cn/record/img/cnr/CNRCDP/2023/0609/a9597944f437430fbee597cab4c9bf7e10.jpg"});Xt(()=>{const o=Ai().scale(on/2-.5).translate([on/2,on/2]),l=vi().projection(o);n.subscribe((g,d)=>{g.type==="updateContent"&&(i.cardImg=d.content.img,i.cardContent=d.content.content,console.log(i))});const u=ke("#globe").append("svg").attr("width",on).attr("height",on).style("background-color",ki).style("border-radius","50%");Xe("https://raw.githubusercontent.com/epistler999/GeoLocation/master/world.json").then(g=>{u.append("g").selectAll("path").data(g.features).enter().append("path").attr("d",l).attr("fill",Fi).attr("stroke",zi).attr("stroke-width",.1),e(u,o,l,[-116,-17],[-116,-17],!1),n.subscribe((d,a)=>{if(d.type==="updateLocation"){const c=a.location[0],s=a.location[1],p=a.preLocation[0],h=a.preLocation[1];e(u,o,l,[-p,23-h],[-c,23-s])}})})});const e=(o,l,u,g,d,a=!0)=>{o.select("foreignObject").remove();let c=2500;console.log(a),a||(c=0),o.transition().duration(c).tween("rotate",()=>{const s=at(g,d);return function(p){l.rotate(s(p)),o.selectAll("path").attr("d",u)}}).on("end",()=>{r(o,l,u,d)})},r=(o,l,u,g)=>{const d=g[0],a=g[1],[c,s]=l([-d,23-a]);let[p,h]=l.translate();p=p-on/2,h=h-on/2;const m=40;o.append("foreignObject").attr("x",c+p-m/2).attr("y",s+h-m).attr("width",m).attr("height",m).html("<div id='marker'></div>"),o.selectAll("path").attr("d",u);const v=document.getElementById("marker"),y=_e(Se,{spin:!1,rotate:0,style:{fontSize:"40px",color:"red"}});Ee(y,v)};return(o,l)=>{const u=yt("a-card-meta"),g=yt("a-card");return nn(),tn(Xn,null,[Ci,q("div",Di,[ln(g,{hoverable:"",style:{"max-width":"100%","max-height":"100%","z-index":"-1"}},{cover:wt(()=>[q("img",{alt:"example",src:i.cardImg},null,8,Li)]),default:wt(()=>[ln(u,{title:i.cardContent},null,8,["title"])]),_:1})])],64)}}}),Bi=ot(Oi,[["__scopeId","data-v-2d269123"]]),Hi={class:"map"},Wi={__name:"Map",setup(t){return(n,i)=>(nn(),tn("div",Hi,[ln(Fe),ln(Bi)]))}},Yi=ot(Wi,[["__scopeId","data-v-3838cf19"]]);export{Yi as default};
